<!DOCTYPE html>
<html>
  <head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" sizes="196x196" href="images/icon.png">
    <link href="cheeseStyle.css" rel="stylesheet" type="text/css">
    <link href="reset.css" rel="stylesheet" type="text/css">
    <title>Green Cheese</title>
  </head>
  <body>

    <div id = "gameView">
      <div id = "stars"></div>
      <div id = "planetLarge"></div>
      <div id = "planetSmall"></div>
      <img id = "moonGround" src = "images/cheese/moonGround.png">
      <div id = "mouseCombo">
        <div id = "mouseHappy"></div>
        <img id = "fire" class = "fireOne" src = "images/cheese/fireOne.png"> 
      </div>   
    </div>

    <div id = "loading" class = "starsOn">
      <img id = "moon" src = "images/cheese/moon1.png">
      <div id = "loadingText"></div>
    </div>
  
  </body>
  <script src="./jquery-1.9.0.js"></script>
  <script>


    window.setTimeout(function(){
      loader();
    }, 700);

    var loader = function(){

      var loadLoop = 0;
        
      var loadingLetters = ["L.png", "O.png", "A.png",
                            "D.png", "I.png", "N.png",
                            "G.png"]  

      var letterIndex = 0;

      var phasesOfTheMoon = ["moon1.png", "moon2.png", "moon3.png",
                             "moon4.png", "moon5.png", "moon6.png",
                             "moon7.png", "moon8.png"];
      var moonPhase = 1;

      var loadingTheMoon = window.setInterval(
        function(){
          advanceMoon();
          advanceLoadingText();
          if(loadLoop >= 2){
            $("#loading").remove();
            $("#gameView").css("display", "block");
            window.clearInterval(twinkleStars);
            window.clearInterval(loadingTheMoon);
            run();
          }
      }, 350);

      function advanceMoon(){
        $("#moon").attr("src", "images/cheese/"+phasesOfTheMoon[moonPhase]);
        if(moonPhase < 7){
          moonPhase++;
        }
        else{
          moonPhase = 0;
        }
      }

      function advanceLoadingText(){
        if(letterIndex === 7){
          $("#loadingText").html("");
          letterIndex++;
          loadLoop++;
          letterIndex = 0;
        }
        else{
          var newLetter = $("<img>");
          newLetter.attr("src", "images/cheese/"+loadingLetters[letterIndex]);
          newLetter.addClass("loadingLetter");
          $("#loadingText").append(newLetter);
          letterIndex++;
        }
      }

      var twinkleStars = window.setInterval(
        function(){
          if($("#loading").hasClass("starsOn")){
            $("#loading").removeClass("starsOn");
            $("#loading").addClass("starsOff");
          }
          else{
            $("#loading").addClass("starsOn");
            $("#loading").removeClass("starsOff");
          }
        }, 200);

      }





    var run = function(){  

      $("#loading").remove();



      var flashFire = window.setInterval(
        function(){
          if($("#fire").hasClass("fireOne")){
            $("#fire").removeClass("fireOne");
            $("#fire").addClass("fireTwo");
            $("#fire").attr("src", "images/cheese/fireTwo.png");
          }
          else{
            $("#fire").addClass("fireOne");
            $("#fire").removeClass("fireTwo");
            $("#fire").attr("src", "images/cheese/fireOne.png");
          }
        }, 100);


      var twinkleStars = window.setInterval(
        function(){
          if($("#stars").hasClass("starsOn")){
            $("#stars").removeClass("starsOn");
            $("#stars").addClass("starsOff");
          }
          else{
            $("#stars").addClass("starsOn");
            $("#stars").removeClass("starsOff");
          }
        }, 170);


    }

  </script>
  </html>
